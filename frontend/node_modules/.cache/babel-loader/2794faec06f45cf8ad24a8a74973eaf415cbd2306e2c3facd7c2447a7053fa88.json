{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import Login from'./components/Login';import Register from'./components/Register';import CandidateRegister from'./components/CandidateRegister';import Dashboard from'./components/Dashboard';import AdminDashboard from'./components/AdminDashboard';import VoterDashboard from'./components/VoterDashboard';import CandidateDashboard from'./components/CandidateDashboard';import RoleProtectedRoute from'./components/RoleProtectedRoute';import Home from'./components/public/Home';import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[token,setToken]=useState('');const[userRole,setUserRole]=useState('');const[authView,setAuthView]=useState('home');// 'home' | 'login' | 'register' | 'registerCandidate'\nuseEffect(()=>{const storedToken=localStorage.getItem('token');const storedRole=localStorage.getItem('userRole');if(storedToken){setToken(storedToken);setUserRole(storedRole);setIsLoggedIn(true);}},[]);const handleLogin=(token,role)=>{localStorage.setItem('token',token);localStorage.setItem('userRole',role);setToken(token);setUserRole(role);setIsLoggedIn(true);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('userRole');setToken('');setUserRole('');setIsLoggedIn(false);};const navigateToRegister=()=>setAuthView('register');const navigateToRegisterCandidate=()=>setAuthView('registerCandidate');const navigateToLogin=()=>setAuthView('login');const navigateToHome=()=>setAuthView('home');// Render dashboard based on user role\nconst renderDashboard=()=>{switch(userRole){case'admin':return/*#__PURE__*/_jsx(AdminDashboard,{token:token,onLogout:()=>{handleLogout();navigateToHome();}});case'voter':return/*#__PURE__*/_jsx(VoterDashboard,{token:token,onLogout:()=>{handleLogout();navigateToHome();}});case'candidate':return/*#__PURE__*/_jsx(CandidateDashboard,{token:token,onLogout:()=>{handleLogout();navigateToHome();}});default:return/*#__PURE__*/_jsx(Dashboard,{token:token,userRole:userRole,onLogout:()=>{handleLogout();navigateToHome();}});}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:!isLoggedIn?authView==='home'?/*#__PURE__*/_jsx(Home,{onLoginClick:navigateToLogin,onRegisterClick:navigateToRegister,onRegisterCandidateClick:navigateToRegisterCandidate}):authView==='login'?/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onNavigateToRegister:navigateToRegister,onNavigateToHome:navigateToHome}):authView==='register'?/*#__PURE__*/_jsx(Register,{onNavigateToLogin:navigateToLogin,onNavigateToCandidate:navigateToRegisterCandidate}):/*#__PURE__*/_jsx(CandidateRegister,{onNavigateToLogin:navigateToLogin,onNavigateToVoter:navigateToRegister}):renderDashboard()});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Login","Register","CandidateRegister","Dashboard","AdminDashboard","VoterDashboard","CandidateDashboard","RoleProtectedRoute","Home","jsx","_jsx","App","isLoggedIn","setIsLoggedIn","token","setToken","userRole","setUserRole","authView","setAuthView","storedToken","localStorage","getItem","storedRole","handleLogin","role","setItem","handleLogout","removeItem","navigateToRegister","navigateToRegisterCandidate","navigateToLogin","navigateToHome","renderDashboard","onLogout","className","children","onLoginClick","onRegisterClick","onRegisterCandidateClick","onLogin","onNavigateToRegister","onNavigateToHome","onNavigateToLogin","onNavigateToCandidate","onNavigateToVoter"],"sources":["D:/Desktop folder/Major Project clg/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport CandidateRegister from './components/CandidateRegister';\nimport Dashboard from './components/Dashboard';\nimport AdminDashboard from './components/AdminDashboard';\nimport VoterDashboard from './components/VoterDashboard';\nimport CandidateDashboard from './components/CandidateDashboard';\nimport RoleProtectedRoute from './components/RoleProtectedRoute';\nimport Home from './components/public/Home';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [token, setToken] = useState('');\n  const [userRole, setUserRole] = useState('');\n  const [authView, setAuthView] = useState('home'); // 'home' | 'login' | 'register' | 'registerCandidate'\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    const storedRole = localStorage.getItem('userRole');\n    if (storedToken) {\n      setToken(storedToken);\n      setUserRole(storedRole);\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const handleLogin = (token, role) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('userRole', role);\n    setToken(token);\n    setUserRole(role);\n    setIsLoggedIn(true);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole');\n    setToken('');\n    setUserRole('');\n    setIsLoggedIn(false);\n  };\n\n  const navigateToRegister = () => setAuthView('register');\n  const navigateToRegisterCandidate = () => setAuthView('registerCandidate');\n  const navigateToLogin = () => setAuthView('login');\n  const navigateToHome = () => setAuthView('home');\n\n  // Render dashboard based on user role\n  const renderDashboard = () => {\n    switch (userRole) {\n      case 'admin':\n        return <AdminDashboard token={token} onLogout={() => { handleLogout(); navigateToHome(); }} />;\n      case 'voter':\n        return <VoterDashboard token={token} onLogout={() => { handleLogout(); navigateToHome(); }} />;\n      case 'candidate':\n        return <CandidateDashboard token={token} onLogout={() => { handleLogout(); navigateToHome(); }} />;\n      default:\n        return <Dashboard token={token} userRole={userRole} onLogout={() => { handleLogout(); navigateToHome(); }} />;\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      {!isLoggedIn ? (\n        authView === 'home' ? (\n          <Home onLoginClick={navigateToLogin} onRegisterClick={navigateToRegister} onRegisterCandidateClick={navigateToRegisterCandidate} />\n        ) : authView === 'login' ? (\n          <Login onLogin={handleLogin} onNavigateToRegister={navigateToRegister} onNavigateToHome={navigateToHome} />\n        ) : (\n          authView === 'register' ? (\n            <Register onNavigateToLogin={navigateToLogin} onNavigateToCandidate={navigateToRegisterCandidate} />\n          ) : (\n            <CandidateRegister onNavigateToLogin={navigateToLogin} onNavigateToVoter={navigateToRegister} />\n          )\n        )\n      ) : (\n        renderDashboard()\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}